# [웹앱] fixed가 os별로 다르게 적용됐던 이유

## 문제상황
<br>

<img width="180px" alt="스크린샷 2022-06-19 오후 2 53 34" src="https://user-images.githubusercontent.com/69563429/174467881-416e4ac8-594e-455e-88a0-71005a0c30f2.png">

<br>
웹으로 휴대폰 인증화면 UI를 완성하고 나서 Android 기종으로 테스트 했을 때, 위와 같은 상황이 발생했다. 

키보드가 활성화 됐을 때, 하단버튼이 키보드 위로 올라오면서 input창을 가리게 되는 현상.

반면에 IOS는 문제가 없었다.

찾아보니 해당 이슈는 OS별로 다르게 나타나고, IOS는 버전별로 다르다고 한다.

---
<br>

## 1. Android
안드로이드 경우 가상키보드가 활성화 됐을 때, 키보드 영역 위치 보다 아래에 있는 요소들을 강제스크롤 시킨다. 

![다운로드 (1) (1)](https://user-images.githubusercontent.com/69563429/174467919-97e617a1-2473-4b84-b10c-07ee23ec99a1.png)
*출처 : https://nuhends.tistory.com/2*


<br>

또한, fixed는 viewport를 기준으로 fixed하는 거 아니겠음?

Android는 키보드가 활성화 됐을 때, viewport를 키보드 위에 부분이라고 인식하게 된다. 

그래서 내가 하단 고정했던 버튼이 키보드 위로 올라와 버리는 이슈가 발생해 버린 것이다.

![Frame 26 (1)](https://user-images.githubusercontent.com/69563429/174467992-411f4c32-50c1-434e-9b36-760c99536034.png)

<br>

## 2. IOS

### 2.1 10.1버전 
컨텐츠가 짧으면 ( 키보드 비활성화 시 컨텐츠가 viewport를 넘어가지 않을 때 ) 키보드가 활성화 됐을 때, 강제스크롤 되는 부분을 고려할 필요가 없다. 

그냥 웹에서 만든 그대로 똑같이 동작하기 때문이다. 

---

반면, 컨텐츠가 길 경우 ( 키보드 비활성화 시 컨텐츠가 viewport를 넘어갔을 때 ) 컨텐츠 전체가 viewport로 설정된다. 

하단 고정된 요소가 스크롤이 올라가면서 키보드 위로 나타나버린다. ( 내가 겪은 문제상황과 동일하게..되버림. )

![다운로드 (2)](https://user-images.githubusercontent.com/69563429/174468026-b3ccfcc5-7dd2-4b39-864a-1177bbab3975.png)
*출처 : https://nuhends.tistory.com/2*

<br>

### 2.2 10.3 이후 버전 
컨텐츠가 짧을 경우엔 10.1 버전이랑 다를 게 없다.

---

컨텐츠가 길 경우엔 좀 다르다.

viewport의 가동범위를 알아야 한다. → 최대 y값과 최소 값

![다운로드 (3)](https://user-images.githubusercontent.com/69563429/174468033-b485cb6d-cb10-441a-b883-89a84a9d2913.png)
*출처 : https://nuhends.tistory.com/2*

case_4랑 case_5를 보면, 어느 순간 부터 컨텐츠 스크롤을 올려도 고정되어있는 것을 확인할 수 있는데, viewport 가동범위의 최소 y값을 기준으로 fixed를 먹이게 되는 것이다.

10.1 버전 이었다면, case_4와 case_5일 때, 하단 고정바도 컨텐츠를 스크롤하는 만큼 딸려 올라갔을 텐데 동작원리가 다르다는 것을 여기서 알 수 있다.

---

## 내 문제상황에 적용한다면?
<br>

Android 

- input blur일 때만 나타나게 하는 거는 확실한 해결법이 안됐음.
    
    키보드를 내려도 focus가 활성화 되어있는 상황이 있기 때문.
    
- 컨텐츠의 max-height값과 z-index값을 지정해서 input 창 위로 하단요소가 올라올 경우 숨기는 형태
    
    문제는 하단 고정바가 반만 숨겨지는 형태가 발생하기도 함. 
    
    마냥 max-height값을 높이기엔 컨텐츠가 없는 부분도 강제스크롤이 올라가면서 화면이 왔다갔다 하게 됨.
- viewport 100%로 잡고 컨텐츠와 하단고정바 px 뺀 만큼 padding을 줘보면 어떨까
    

IOS

- 컨텐츠가 길지 않기 때문에 하단 고정 요소가 키보드 위로 올라오는 이슈를 고려하지 않아도 될 거 같다.

